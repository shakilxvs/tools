<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS DETECT - XVS Tools</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #000000 0%, #1a0a2e 50%, #0f0520 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
        }

        .back-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        h1 {
            color: white;
            font-size: 3.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 60px;
            letter-spacing: -1px;
        }

        .url-input-container {
            background: #6b4ce6;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .url-input {
            width: 100%;
            background: transparent;
            border: none;
            padding: 28px 35px;
            font-size: 1.4rem;
            color: white;
            outline: none;
        }

        .url-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .detect-button {
            width: 100%;
            background: #16a085;
            border: none;
            border-radius: 15px;
            padding: 30px 50px;
            font-size: 2rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            margin-bottom: 40px;
        }

        .detect-button:hover {
            background: #1abc9c;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(22, 160, 133, 0.4);
        }

        .result-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 40px;
            display: none;
        }

        .result-container.active {
            display: block;
        }

        .result-title {
            color: white;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 25px;
        }

        .cms-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 12px;
        }

        .info-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .info-value {
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            word-break: break-word;
        }

        .technologies-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .tech-tag {
            background: #6b4ce6;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.95rem;
        }

        .footer-note {
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.1rem;
            margin-top: 80px;
            font-style: italic;
        }

        .loading {
            text-align: center;
            color: white;
            padding: 40px 20px;
            display: none;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 60px;
            height: 60px;
            margin: 0 auto 20px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #16a085;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .loading-dots {
            font-size: 1.5rem;
            letter-spacing: 4px;
        }

        .loading-dots span {
            animation: blink 1.4s infinite;
            animation-fill-mode: both;
        }

        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes blink {
            0%, 80%, 100% {
                opacity: 0;
            }
            40% {
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .cms-info {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }

            .cms-info {
                grid-template-columns: 1fr;
            }

            .info-card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="back-button" onclick="window.location.href='https://shakilxvs.github.io/tools/'">‚Üê Back to Tools</button>
        
        <h1>CMS DETECT</h1>

        <div class="url-input-container">
            <input 
                type="text" 
                class="url-input" 
                id="urlInput"
                placeholder="https://example.com"
                autocomplete="off"
            >
        </div>

        <button class="detect-button" id="detectBtn">DETECT CMS</button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">Analyzing website</div>
            <div class="loading-dots">
                <span>.</span><span>.</span><span>.</span>
            </div>
        </div>

        <div class="result-container" id="resultContainer">
            <div class="result-title">Detection Results</div>
            
            <div class="cms-info">
                <div class="info-card">
                    <div class="info-label">CMS Detected</div>
                    <div class="info-value" id="cmsName">-</div>
                </div>
                
                <div class="info-card">
                    <div class="info-label">Version</div>
                    <div class="info-value" id="cmsVersion">-</div>
                </div>
                
                <div class="info-card">
                    <div class="info-label">Confidence</div>
                    <div class="info-value" id="confidence">-</div>
                </div>

                <div class="info-card">
                    <div class="info-label">Theme/Template</div>
                    <div class="info-value" id="themeName">-</div>
                </div>

                <div class="info-card">
                    <div class="info-label">Hosting Provider</div>
                    <div class="info-value" id="hostingProvider">-</div>
                </div>

                <div class="info-card">
                    <div class="info-label">Server Type</div>
                    <div class="info-value" id="serverType">-</div>
                </div>

                <div class="info-card">
                    <div class="info-label">CDN</div>
                    <div class="info-value" id="cdnProvider">-</div>
                </div>

                <div class="info-card">
                    <div class="info-label">Programming Language</div>
                    <div class="info-value" id="programmingLang">-</div>
                </div>
            </div>

            <div class="info-label">Technologies Detected</div>
            <div class="technologies-list" id="techList"></div>
        </div>

        <div class="footer-note">
            *Not for general use. Educational purpose only.
        </div>
    </div>

    <script>
        const urlInput = document.getElementById('urlInput');
        const detectBtn = document.getElementById('detectBtn');
        const loading = document.getElementById('loading');
        const resultContainer = document.getElementById('resultContainer');

        // CMS Detection Patterns - Shopify FIRST to prevent false WordPress detections
        const CMS_PATTERNS = {
            Shopify: {
                patterns: [
                    /cdn\.shopify\.com/i,
                    /myshopify\.com/i,
                    /Shopify\.theme/i,
                    /shopify-section/i,
                    /Shopify\.cdnHost/i,
                    /shopifycdn\.com/i,
                    /monorail-edge\.shopifysvc\.com/i,
                    /shopify\.com\/s\/files/i,
                    /Shopify\.routes/i
                ],
                versionPattern: null,
                themePattern: /Shopify\.theme\s*=\s*\{[^}]*name:\s*["']([^"']+)["']/i,
                confidence: 98,
                tech: ['Ruby on Rails', 'Liquid', 'JavaScript']
            },
            WordPress: {
                patterns: [
                    /wp-content/i,
                    /wp-includes/i,
                    /wp-json/i,
                    /<meta name="generator" content="WordPress/i,
                    /\/wp-admin\//i,
                    /\/wp-login\.php/i
                ],
                versionPattern: /WordPress[\/\s]+(\d+\.\d+(?:\.\d+)?)/i,
                themePattern: /\/wp-content\/themes\/([^\/\?"']+)/i,
                confidence: 95,
                tech: ['PHP', 'MySQL']
            },
            Wix: {
                patterns: [
                    /static\.wixstatic\.com/i,
                    /parastorage\.com/i,
                    /wix\.com/i,
                    /_wix_/i,
                    /wixpress\.com/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 95,
                tech: ['React', 'Node.js', 'JavaScript']
            },
            Squarespace: {
                patterns: [
                    /static1\.squarespace\.com/i,
                    /squarespace\.com/i,
                    /squarespace-cdn\.com/i,
                    /"Squarespace"/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 95,
                tech: ['JavaScript', 'Node.js']
            },
            Joomla: {
                patterns: [
                    /\/components\/com_/i,
                    /\/media\/jui\//i,
                    /<meta name="generator" content="Joomla/i,
                    /option=com_/i,
                    /\/administrator\/index\.php/i
                ],
                versionPattern: /Joomla[!\/\s]+(\d+\.\d+(?:\.\d+)?)/i,
                themePattern: /\/templates\/([^\/\?"']+)/i,
                confidence: 90,
                tech: ['PHP', 'MySQL']
            },
            Drupal: {
                patterns: [
                    /\/sites\/default\/files/i,
                    /\/misc\/drupal/i,
                    /<meta name="generator" content="Drupal/i,
                    /Drupal\.settings/i,
                    /\/node\/\d+/i
                ],
                versionPattern: /Drupal[\/\s]+(\d+)/i,
                themePattern: /\/themes\/([^\/\?"']+)/i,
                confidence: 90,
                tech: ['PHP', 'MySQL']
            },
            Magento: {
                patterns: [
                    /\/static\/version\d+/i,
                    /mage\/cookies/i,
                    /Magento/i,
                    /\/skin\/frontend\//i,
                    /Magento_/i
                ],
                versionPattern: /Magento[\/\s]+(\d+\.\d+)/i,
                themePattern: /\/frontend\/([^\/\?"']+)/i,
                confidence: 90,
                tech: ['PHP', 'MySQL', 'Zend Framework']
            },
            PrestaShop: {
                patterns: [
                    /prestashop/i,
                    /\/modules\/\w+\//i,
                    /\/themes\/\w+\//i,
                    /prestashop\.com/i
                ],
                versionPattern: /PrestaShop[\/\s]+(\d+\.\d+)/i,
                themePattern: /\/themes\/([^\/\?"']+)/i,
                confidence: 90,
                tech: ['PHP', 'MySQL', 'Smarty']
            },
            Webflow: {
                patterns: [
                    /webflow/i,
                    /assets\.website-files\.com/i,
                    /"wf-"/i,
                    /webflow\.com/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 90,
                tech: ['HTML5', 'CSS3', 'JavaScript']
            },
            BigCommerce: {
                patterns: [
                    /bigcommerce\.com/i,
                    /cdn\d+\.bigcommerce\.com/i,
                    /"BigCommerce"/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 90,
                tech: ['PHP', 'JavaScript']
            },
            Ghost: {
                patterns: [
                    /ghost/i,
                    /\/ghost\//i,
                    /content\/themes/i,
                    /<meta name="generator" content="Ghost/i
                ],
                versionPattern: /Ghost[\/\s]+(\d+\.\d+)/i,
                themePattern: /\/content\/themes\/([^\/\?"']+)/i,
                confidence: 85,
                tech: ['Node.js', 'Handlebars', 'JavaScript']
            },
            Blogger: {
                patterns: [
                    /blogspot\.com/i,
                    /blogger\.com/i,
                    /"Blogger"/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 95,
                tech: ['Google Infrastructure']
            },
            Weebly: {
                patterns: [
                    /weebly\.com/i,
                    /editmysite\.com/i,
                    /"Weebly"/i
                ],
                versionPattern: null,
                themePattern: null,
                confidence: 90,
                tech: ['JavaScript']
            },
            WooCommerce: {
                patterns: [
                    /woocommerce/i,
                    /\/woocommerce\//i,
                    /wc-/i
                ],
                versionPattern: /WooCommerce[\/\s]+(\d+\.\d+)/i,
                themePattern: /\/wp-content\/themes\/([^\/\?"']+)/i,
                confidence: 85,
                tech: ['WordPress', 'PHP', 'MySQL']
            },
            Elementor: {
                patterns: [
                    /elementor/i,
                    /\/elementor\//i
                ],
                versionPattern: /Elementor[\/\s]+(\d+\.\d+)/i,
                themePattern: /\/wp-content\/themes\/([^\/\?"']+)/i,
                confidence: 80,
                tech: ['WordPress', 'PHP']
            }
        };

        // Hosting Provider Detection
        const HOSTING_PATTERNS = {
            'AWS': /amazonaws\.com|aws-|cloudfront/i,
            'Google Cloud': /googleapis\.com|googleusercontent\.com|gcp-/i,
            'Cloudflare': /cloudflare|__cfduid|cf-ray/i,
            'DigitalOcean': /digitalocean/i,
            'Vercel': /vercel/i,
            'Netlify': /netlify/i,
            'GitHub Pages': /github\.io/i,
            'Heroku': /herokuapp\.com/i,
            'Azure': /azure|microsoft/i,
            'GoDaddy': /godaddy/i,
            'Bluehost': /bluehost/i,
            'HostGator': /hostgator/i,
            'SiteGround': /siteground/i,
            'WP Engine': /wpengine/i,
            'Kinsta': /kinsta/i
        };

        // CDN Detection
        const CDN_PATTERNS = {
            'Cloudflare': /cloudflare|__cfduid|cf-ray/i,
            'Fastly': /fastly/i,
            'Akamai': /akamai/i,
            'CloudFront': /cloudfront/i,
            'MaxCDN': /maxcdn/i,
            'KeyCDN': /keycdn/i,
            'BunnyCDN': /bunnycdn/i,
            'jsDelivr': /jsdelivr/i,
            'Unpkg': /unpkg\.com/i,
            'Google CDN': /gstatic\.com/i
        };

        // Server Type Detection
        const SERVER_PATTERNS = {
            'Nginx': /nginx/i,
            'Apache': /apache/i,
            'LiteSpeed': /litespeed/i,
            'IIS': /microsoft-iis/i,
            'Caddy': /caddy/i,
            'OpenResty': /openresty/i
        };

        // Technology detection patterns
        const TECH_PATTERNS = {
            'jQuery': /jquery/i,
            'React': /react/i,
            'Angular': /angular/i,
            'Vue.js': /vue\.js|vuejs/i,
            'Bootstrap': /bootstrap/i,
            'Tailwind CSS': /tailwind/i,
            'Google Analytics': /google-analytics|gtag|ga\.js/i,
            'Google Tag Manager': /googletagmanager/i,
            'Cloudflare': /cloudflare|__cfduid/i,
            'Font Awesome': /font-awesome|fontawesome/i,
            'Stripe': /stripe/i,
            'PayPal': /paypal/i,
            'Hotjar': /hotjar/i,
            'Intercom': /intercom/i,
            'Disqus': /disqus/i,
            'AddThis': /addthis/i,
            'Nginx': /nginx/i,
            'Apache': /apache/i,
            'PHP': /\.php|x-powered-by.*php/i,
            'Node.js': /node\.js|nodejs/i,
            'Next.js': /next\.js|_next/i,
            'Gatsby': /gatsby/i,
            'Nuxt.js': /nuxt/i
        };

        function normalizeUrl(url) {
            url = url.trim();
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            return url;
        }

        async function fetchWebsiteContent(url) {
            // Try multiple CORS proxies in parallel for faster results
            const proxies = [
                `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                `https://corsproxy.io/?${encodeURIComponent(url)}`,
                `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`
            ];

            // Create fetch promises for all proxies
            const fetchPromises = proxies.map(proxy => 
                fetch(proxy, {
                    method: 'GET',
                    headers: { 'Accept': 'text/html,application/xhtml+xml,application/xml' },
                    signal: AbortSignal.timeout(8000) // 8 second timeout
                })
                .then(response => {
                    if (response.ok) {
                        return response.text();
                    }
                    throw new Error('Response not ok');
                })
                .then(html => {
                    if (html && html.length > 100) {
                        return html;
                    }
                    throw new Error('HTML too short');
                })
                .catch(() => null)
            );

            // Race all proxies and return first successful result
            const results = await Promise.all(fetchPromises);
            const validResult = results.find(result => result !== null);
            
            if (validResult) {
                return validResult;
            }

            throw new Error('All proxies failed');
        }

        function detectCMS(html) {
            let detectedCMS = null;
            let highestConfidence = 0;
            let version = 'N/A';
            let theme = 'N/A';
            const technologies = new Set();
            const cmsScores = {};

            // First pass: Calculate scores for all CMS platforms
            for (const [cmsName, config] of Object.entries(CMS_PATTERNS)) {
                let matches = 0;
                
                for (const pattern of config.patterns) {
                    if (pattern.test(html)) {
                        matches++;
                    }
                }

                const matchRatio = matches / config.patterns.length;
                const confidence = Math.round(matchRatio * config.confidence);
                
                if (matches > 0) {
                    cmsScores[cmsName] = {
                        confidence: confidence,
                        matches: matches,
                        config: config
                    };
                }
            }

            // Priority override: If Shopify is detected with decent confidence, use it
            // This prevents false WordPress detections on Shopify sites
            if (cmsScores['Shopify'] && cmsScores['Shopify'].confidence >= 50) {
                detectedCMS = 'Shopify';
                highestConfidence = cmsScores['Shopify'].confidence;
                
                // Detect Shopify theme from Shopify.theme object (handles minified code too)
                let shopifyThemeMatch = html.match(/Shopify\.theme\s*=\s*\{[^}]{0,800}?name:\s*["']([^"']+)["']/is);
                if (!shopifyThemeMatch) {
                    // Try alternate format
                    shopifyThemeMatch = html.match(/["']?theme["']?\s*:\s*\{[^}]{0,800}?["']?name["']?\s*:\s*["']([^"']+)["']/is);
                }
                if (shopifyThemeMatch && shopifyThemeMatch[1]) {
                    theme = shopifyThemeMatch[1];
                } else {
                    // Fallback: Try to detect from asset URLs
                    const assetThemeMatch = html.match(/cdn\.shopify\.com\/s\/files\/[^\/]+\/[^\/]+\/[^\/]+\/t\/\d+\/assets\/theme\.([^\.?"']+)/i);
                    if (assetThemeMatch && assetThemeMatch[1]) {
                        theme = assetThemeMatch[1];
                    } else {
                        // Another fallback: check for theme name in meta tags or comments
                        const metaThemeMatch = html.match(/theme[_-]?name["\s:]+([^"',\s]+)/i);
                        if (metaThemeMatch && metaThemeMatch[1]) {
                            theme = metaThemeMatch[1];
                        }
                    }
                }
                
                // Add Shopify technologies
                cmsScores['Shopify'].config.tech.forEach(tech => technologies.add(tech));
            } else {
                // Use highest confidence CMS
                for (const [cmsName, score] of Object.entries(cmsScores)) {
                    if (score.confidence > highestConfidence) {
                        highestConfidence = score.confidence;
                        detectedCMS = cmsName;
                        
                        // Try to detect version
                        if (score.config.versionPattern) {
                            const versionMatch = html.match(score.config.versionPattern);
                            if (versionMatch && versionMatch[1]) {
                                version = versionMatch[1];
                            }
                        }

                        // Try to detect theme
                        if (score.config.themePattern) {
                            const themeMatch = html.match(score.config.themePattern);
                            if (themeMatch && themeMatch[1]) {
                                theme = themeMatch[1].replace(/_/g, ' ').replace(/-/g, ' ');
                                // Capitalize theme name
                                theme = theme.split(' ').map(word => 
                                    word.charAt(0).toUpperCase() + word.slice(1)
                                ).join(' ');
                            }
                        }

                        // Add CMS-specific technologies
                        score.config.tech.forEach(tech => technologies.add(tech));
                    }
                }
            }

            // Detect Hosting Provider
            let hosting = 'N/A';
            for (const [provider, pattern] of Object.entries(HOSTING_PATTERNS)) {
                if (pattern.test(html)) {
                    hosting = provider;
                    break;
                }
            }

            // Detect CDN
            let cdn = 'N/A';
            for (const [cdnName, pattern] of Object.entries(CDN_PATTERNS)) {
                if (pattern.test(html)) {
                    cdn = cdnName;
                    break;
                }
            }

            // Detect Server Type
            let serverType = 'N/A';
            for (const [server, pattern] of Object.entries(SERVER_PATTERNS)) {
                if (pattern.test(html)) {
                    serverType = server;
                    break;
                }
            }

            // Detect Programming Language
            let language = 'N/A';
            if (/\.php|x-powered-by.*php/i.test(html)) {
                language = 'PHP';
            } else if (/node\.js|nodejs/i.test(html)) {
                language = 'Node.js';
            } else if (/asp\.net|aspnet/i.test(html)) {
                language = 'ASP.NET';
            } else if (/\.jsp|java/i.test(html)) {
                language = 'Java';
            } else if (/python|django|flask/i.test(html)) {
                language = 'Python';
            } else if (/ruby/i.test(html)) {
                language = 'Ruby';
            } else if (detectedCMS) {
                // Infer from CMS
                if (detectedCMS === 'WordPress' || detectedCMS === 'Joomla' || detectedCMS === 'Drupal') {
                    language = 'PHP';
                } else if (detectedCMS === 'Ghost') {
                    language = 'Node.js';
                } else if (detectedCMS === 'Shopify') {
                    language = 'Ruby';
                }
            }

            // Detect additional technologies
            for (const [tech, pattern] of Object.entries(TECH_PATTERNS)) {
                if (pattern.test(html)) {
                    technologies.add(tech);
                }
            }

            return {
                cms: detectedCMS || 'Unknown',
                version: version,
                confidence: highestConfidence > 0 ? `${highestConfidence}%` : '0%',
                theme: theme,
                hosting: hosting,
                cdn: cdn,
                serverType: serverType,
                language: language,
                technologies: Array.from(technologies).slice(0, 12)
            };
        }

        async function performDetection(url) {
            try {
                loading.classList.add('active');
                resultContainer.classList.remove('active');

                const html = await fetchWebsiteContent(url);
                const result = detectCMS(html);

                // Update all detection fields
                document.getElementById('cmsName').textContent = result.cms;
                document.getElementById('cmsVersion').textContent = result.version;
                document.getElementById('confidence').textContent = result.confidence;
                document.getElementById('themeName').textContent = result.theme;
                document.getElementById('hostingProvider').textContent = result.hosting;
                document.getElementById('serverType').textContent = result.serverType;
                document.getElementById('cdnProvider').textContent = result.cdn;
                document.getElementById('programmingLang').textContent = result.language;

                const techList = document.getElementById('techList');
                techList.innerHTML = '';

                if (result.technologies.length > 0) {
                    result.technologies.forEach(tech => {
                        const tag = document.createElement('div');
                        tag.className = 'tech-tag';
                        tag.textContent = tech;
                        techList.appendChild(tag);
                    });
                } else {
                    const tag = document.createElement('div');
                    tag.className = 'tech-tag';
                    tag.textContent = 'No additional technologies detected';
                    techList.appendChild(tag);
                }

                loading.classList.remove('active');
                resultContainer.classList.add('active');

            } catch (error) {
                loading.classList.remove('active');
                console.error('Detection error:', error);
                
                // Show error in results
                document.getElementById('cmsName').textContent = 'Detection Failed';
                document.getElementById('cmsVersion').textContent = 'N/A';
                document.getElementById('confidence').textContent = '0%';
                document.getElementById('themeName').textContent = 'N/A';
                document.getElementById('hostingProvider').textContent = 'N/A';
                document.getElementById('serverType').textContent = 'N/A';
                document.getElementById('cdnProvider').textContent = 'N/A';
                document.getElementById('programmingLang').textContent = 'N/A';
                
                const techList = document.getElementById('techList');
                techList.innerHTML = '';
                const tag = document.createElement('div');
                tag.className = 'tech-tag';
                tag.textContent = 'Unable to analyze - Site may block automated requests';
                techList.appendChild(tag);
                
                resultContainer.classList.add('active');
            }
        }

        detectBtn.addEventListener('click', async () => {
            const url = urlInput.value.trim();

            if (!url) {
                alert('Please enter a website URL!');
                return;
            }

            const normalizedUrl = normalizeUrl(url);

            try {
                new URL(normalizedUrl);
            } catch (e) {
                alert('Please enter a valid URL!');
                return;
            }

            await performDetection(normalizedUrl);
        });

        urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                detectBtn.click();
            }
        });
    </script>
</body>
</html>
